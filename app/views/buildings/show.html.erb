<%= link_to 'Back', buildings_path, class: 'btn btn-light mb-3' %>
<div class='card'>
  <div class='card-body'>
    <h2 class="card-title d-flex justify-content-between mb-4">
      <span> <%= @building.name %> </span>
      <div>
        <%= link_to 'Editar', edit_building_path(@building), class: 'btn btn-warning' %>
        <%= link_to 'Elimi', @building, method: :delete, class: 'btn btn-danger', data: {confirm: 'Â¿EstÃ¡s seguro?'} %>
      </div>
    </h2>
    <div class='mb-4'>
       <h6>Agregar Departamento</h6>

          <%= form_for([@apartment.building, @apartment]) do |f| %>
            <% if @apartment.errors.any? %>
              <div id="error_explanation">
                <h2><%= pluralize(@apartment.errors.count, "error") %> no se puede guardar este Departamento:</h2>

                  <ul>
                  <% @apartment.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                  <% end %>
                  </ul>
              </div>
            <% end %>

            <div class="input-group">
             
              <%= f.number_field :number, class: 'form-control' %>
              <%= f.select :status, Apartment::STATUS_OPTION,  class: 'form-control' %>
              <div class='input-group-append'>
                <%= f.submit  class: 'btn btn-primary' %>
              </div>
            </div>
            
           
          <% end %>
    </div>
     

          <h4> Departamentos </h4>
          <% @building.apartments.each do |apartment| %>
            <% if apartment.persisted? %>
                <div class='card'>
                  <div class='card-body'>
                    <p class='badge badge-secundary'><%= apartment.status %></p>
                    <h5 class="card-title d-flex justify-content-between mb-4"><%= apartment.number %>
                    <td><%= link_to 'Editar', edit_building_apartment_path(apartment.building, apartment) %></td>
                    <td><%= link_to 'Eliminar', [apartment.building, apartment], method: :delete, data: { confirm: 'Are you sure?' } %></td>
                    </h5>
                    <p><%= apartment.building %></p>
                  </div>
                </div>
            <% end  %>    
          <% end %>
  </div>
</div>




<hr>
<h1>New apartment</h1>

<%= render 'apartments/form' %>
<hr>

<h1>Listing apartments</h1>

<table>
  <tr>
    <th>Number</th>
    <th>Status</th>
    <th>Building</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

  <% @building.apartments.each do |apartment| %>
    <% if apartment.persisted? %>
      <tr>
        <td><%= apartment.number %></td>
        <td><%= apartment.status %></td>
        <td><%= apartment.building %></td>
        <td><%= link_to 'Show', [apartment.building, apartment] %></td>
        <td><%= link_to 'Edit', edit_building_apartment_path(apartment.building, apartment) %></td>
        <td><%= link_to 'Destroy', [apartment.building, apartment], method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>    
  <% end %>
</table>



<%= link_to 'New Apartment', new_building_apartment_path(@building.id) %>